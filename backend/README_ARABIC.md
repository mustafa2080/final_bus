# ๐ ููู ุชุดุบู Backend ุนุดุงู ุงูุฅุดุนุงุฑุงุช ุชุธูุฑ ุจุฑูุ

## ุงููุดููุฉ ุฏูููุชู:
โ **ุงูุฅุดุนุงุฑุงุช ุจุชุธูุฑ ุฌูุง ุงูุชุทุจูู ุจุณ**  
โ **ูู ุงูุชุทุจูู ูููููุ ูููุด ุฅุดุนุงุฑุงุช**

## ุงูุญู:
โ **ุชุดุบูู ุงูู Backend ุนุดุงู ูุจุนุช ุงูุฅุดุนุงุฑุงุช ุฎุงุฑุฌ ุงูุชุทุจูู**  
โ **ุงูุฅุดุนุงุฑุงุช ูุชูุตู ุญุชู ูู ุงูุชุทุจูู ูุบูู ุชูุงูุงู**

---

## ๐ ุฎุทูุงุช ุงูุชุดุบูู (ุณููุฉ ุฌุฏุงู):

### 1๏ธโฃ ุชุญููู Service Account Key ูู Firebase

1. ุงูุชุญ [Firebase Console](https://console.firebase.google.com)
2. ุงุฎุชุฑ ูุดุฑูุนู **mybus-5a992**
3. ุงุถุบุท ุนูู โ๏ธ (Settings) โ **Project settings**
4. ุฑูุญ ูุชุงุจ **Service accounts**
5. ุงุถุบุท ุนูู **Generate new private key**
6. ุงุถุบุท **Generate key**
7. ูููุฒู ููู JSON - **ุงุญูุธู ูู ูุฌูุฏ `backend` ุจุงุณู `serviceAccountKey.json`**

### 2๏ธโฃ ุดุบู ุงูู Backend

**ุทุฑููุฉ ุณููุฉ:**
- ุฏูุณ double-click ุนูู ููู **`start.bat`** ูู ูุฌูุฏ backend
- ุฎูุงุต! ุงูู Backend ุดุบุงู ุฏูููุชู

**ุฃู ูู Command Prompt:**
```cmd
cd C:\Users\musta\Desktop\pro\mybus\backend
start.bat
```

### 3๏ธโฃ ุชุฃูุฏ ุฅูู ุดุบุงู

ููุง ูุดุชุบูุ ูุชุดูู ูู ุงูู Console:
```
๐ MyBus Notification Service Started!
๐ก Listening to Firestore changes...
โ ุฌููุน ุงููุฑุงูุจุงุช ูุดุทุฉ:
   - fcm_queue (ุงูุฃูู ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช)
   - trips (ุฑุญูุงุช ุงูุทูุงุจ)
   - absences (ุทูุจุงุช ุงูุบูุงุจ)
   - complaints (ุงูุดูุงูู)

๐ Service is running... 5/10/2025, 10:30:00 ู
```

### 4๏ธโฃ ุฌุฑุจ ุงูุฅุดุนุงุฑุงุช

ุฏูููุชู ูู ุบูุฑุช ุจูุงูุงุช ุทุงูุจ ูู ุงูุชุทุจูู:
- โ **ุงูุฅุดุนุงุฑ ููุธูุฑ ุฌูุง ุงูุชุทุจูู**
- โ **ุงูุฅุดุนุงุฑ ููุธูุฑ ุจุฑู ุงูุชุทุจูู** (ูู notification bar)
- โ **ุญุชู ูู ุงูุชุทุจูู ูุบููุ ุงูุฅุดุนุงุฑ ูููุตู**

---

## ๐ ููู ุชุดูู ุฅูู ุจูุดุชุบูุ

ููุง ูุฌู ุฅุดุนุงุฑ ุฌุฏูุฏุ ูุชุดูู ูู ุงูู Console:
```
๐ค ูุนุงูุฌุฉ ุฅุดุนุงุฑ ุฌุฏูุฏ ูู ุงููุงุฆูุฉ: abc123
   ุงููุณุชูู: user_xyz
   ุงูุนููุงู: ุชู ุชุญุฏูุซ ุจูุงูุงุช ุงูุทุงูุจ
   โ ุฅุดุนุงุฑ ูุฑุณู ุจูุฌุงุญ: projects/.../messages/0:1234...
   โ ุชู ุชุญุฏูุซ ุญุงูุฉ ุงูุฅุดุนุงุฑ ูู ุงููุงุฆูุฉ
```

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ:

1. **ุงูู Backend ูุงุฒู ููุถู ุดุบุงู ุทูู ุงูููุช**  
   ูู ูููุช ุงูู Consoleุ ุงูุฅุดุนุงุฑุงุช ูุด ูุชูุตู ุจุฑู ุงูุชุทุจูู

2. **ููุงุณุชุฎุฏุงู ุงูุญูููู:**  
   ูุงุฒู ุชุฑูุน ุงูู Backend ุนูู ุณูุฑูุฑ (ูุซู Railway ุฃู Heroku)  
   ุนุดุงู ููุถู ุดุบุงู 24/7 ุจุฏูู ูุง ุชููู ุงูููุจููุชุฑ

3. **ุงุฎุชุจุงุฑ ุณุฑูุน:**
   - ุดุบู ุงูู Backend
   - ุบูุฑ ุจูุงูุงุช ุทุงูุจ ูู ุงูุชุทุจูู
   - ุดูู ุงูุฅุดุนุงุฑ ูู notification bar (ุญุชู ูู ุงูุชุทุจูู ูุบูู)

---

## ๐ ุญู ุงููุดุงูู:

### ุงููุดููุฉ: ุงูู Backend ูุด ุจูุดุชุบู
**ุงูุญู:**
- ุชุฃูุฏ ุฅู Node.js ูุซุจุช
- ุชุฃูุฏ ุฅู ููู `serviceAccountKey.json` ููุฌูุฏ ูู ูุฌูุฏ backend
- ุงูุชุญ ูุฌูุฏ backend ูู Command Prompt ูุดุบู:
  ```cmd
  npm install
  node index.js
  ```

### ุงููุดููุฉ: ุงูุฅุดุนุงุฑุงุช ูุณู ูุด ุฌุงูุฉ ุจุฑู ุงูุชุทุจูู
**ุงูุญู:**
1. ุชุฃูุฏ ุฅู ุงูู Backend ุดุบุงู (ุดูู ุงูู Console)
2. ุชุฃูุฏ ุฅู FCM Token ูุญููุธ ูู Firestore (ุฑูุญ Firebase Console โ Firestore โ users โ ุดูู ุฃู user)
3. ุชุฃูุฏ ุฅู ุฃุฐููุงุช ุงูุฅุดุนุงุฑุงุช ููุนูุฉ ูู ุงูุฌูุงุฒ/ุงูุชุทุจูู

### ุงููุดููุฉ: ุฎุทุฃ "User not found" ูู Console
**ุงูุญู:**
- ุงููุณุชุฎุฏู ูุด ููุฌูุฏ ูู Firestore
- ุฃู FCM Token ูุด ูุญููุธ
- ุฎูู ุงููุณุชุฎุฏู ูุณุฌู ุฏุฎูู ูุฑุฉ ุชุงููุฉ ุนุดุงู ูุญูุธ Token

---

## ๐ ููุงุณุชุฎุฏุงู ุงูุญูููู (Production):

### ุงุณุชุฎุฏุงู Railway (ูุฌุงูู ูุญุฏ 500 ุณุงุนุฉ/ุดูุฑ):

1. ุงุนูู ุญุณุงุจ ุนูู https://railway.app
2. New Project โ Deploy from GitHub
3. ุฑุจุท Repository ุจุชุงุนู
4. ุงุฎุชุงุฑ ูุฌูุฏ `backend`
5. Add Environment Variables:
   - `SERVICE_ACCOUNT_KEY`: ูุญุชูู ููู serviceAccountKey.json ูู JSON
   - `FIREBASE_DATABASE_URL`: `https://mybus-5a992.firebaseio.com`
6. Deploy!

Railway ููุฏูู ุฑุงุจุท ูุซู: `https://mybus-backend.up.railway.app`  
ูุงูู Backend ูููุถู ุดุบุงู 24/7 ุจุฏูู ูุง ุชููู ุงูููุจููุชุฑ

---

## โ ุงูุฎูุงุตุฉ:

| ูุจู ุชุดุบูู Backend | ุจุนุฏ ุชุดุบูู Backend |
|-------------------|-------------------|
| โ ุงูุฅุดุนุงุฑุงุช ุฌูุง ุงูุชุทุจูู ุจุณ | โ ุงูุฅุดุนุงุฑุงุช ุฌูุง ูุจุฑู ุงูุชุทุจูู |
| โ ูู ุงูุชุทุจูู ูุบููุ ูููุด ุฅุดุนุงุฑุงุช | โ ุงูุฅุดุนุงุฑุงุช ุชุดุชุบู ุญุชู ูู ูุบูู |
| โ ูุด ุฒู WhatsApp | โ ุชูุงูุงู ุฒู WhatsApp |

---

## ๐ ูุญุชุงุฌ ูุณุงุนุฏุฉุ

ูู ุญุตู ุฃู ูุดููุฉุ ุงุจุนุชูู screenshot ูู ุงูู Console ูุงูุฎุทุฃ ุงููู ุธุงูุฑ.
